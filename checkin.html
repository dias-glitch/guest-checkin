<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ </title>

  <!-- jQuery & Select2 -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- Select2 i18n -->
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/i18n/ja.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/i18n/zh-CN.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/i18n/ko.js"></script>

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background-color: #f0f2f5;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .checkin-box {
      background-color: white;
      padding: 30px 25px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 420px;
      box-sizing: border-box;
      position: relative;
    }

    .language-select {
      position: absolute;
      top: 8px;
      right: 8px;
      display 8px;
      align-items: center;
      font-size: 12px;
    }

    .language-select select{
      font-size: 12px;
      padding: 2px 6px;
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-top: 15px;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      font-size: 16px;
      border-radius: 5px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }

    button {
      width: 100%;
      background-color: blue;
      color: white;
      padding: 12px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      margin-top: 25px;
      cursor: pointer;
    }

    button:hover {
      background-color: darkblue;
    }

    #message {
      text-align: center;
      margin-top: 15px;
      color: green;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="checkin-box">
    <div class="language-select">
      ğŸŒ
      <select id="languageSelect" onchange="setLanguage(this.value)">
        <option value="ja">æ—¥æœ¬èª</option>
        <option value="en">English</option>
        <option value="es">EspaÃ±ol</option>
        <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
        <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
        <option value="ko">í•œêµ­ì–´</option>
      </select>
    </div>

    <h2 id="formTitle">ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æƒ…å ±</h2>
    <div id="guestInfo">èª­ã¿è¾¼ã¿ä¸­...</div>

    <form id="checkinForm">
      <label id="labelDob">ç”Ÿå¹´æœˆæ—¥:</label>
      <input type="date" name="dob" required>

      <label id="labelGender">æ€§åˆ¥:</label>
      <select name="gender" id="genderSelect" required>
        <option value="">{emptyGender}</option>
        <option value="M" data-i18n-option="genderMale">ç”·æ€§</option>
        <option value="F" data-i18n-option="genderFemale">å¥³æ€§</option>
        <option value="Other" data-i18n-option="genderOther">ãã®ä»–</option>
      </select>

      <label id="labelNationality">å›½ç±:</label>
      <select name="nationality" id="nationalitySelect" required>
        <option value="">{emptyNationality}</option>
        <option value="Japan" data-i18n-option="countryJapan">Japan</option>
        <option value="USA" data-i18n-option="countryUSA">USA</option>
        <option value="China" data-i18n-option="countryChina">China</option>
        <option value="Germany" data-i18n-option="countryGermany">Germany</option>
        <option value="France" data-i18n-option="countryFrance">France</option>
        <option value="Taiwan" data-i18n-option="countryTaiwan">Taiwan</option>
        <option value="South Korea" data-i18n-option="countryKorea">South Korea</option>
        <option value="Italy" data-i18n-option="countryItaly">Italy</option>
        <option value="Switzerland" data-i18n-option="countrySwitzerland">Switzerland</option>
        <option value="Russia" data-i18n-option="countryRussia">Russia</option>
        <option value="Thailand" data-i18n-option="countryThailand">Thailand</option>
        <option value="Vietnam" data-i18n-option="countryVietnam">Vietnam</option>
      </select>

      <label id="labelPrev">å‰æ³Šåœ°:</label>
      <input type="text" name="previousStay" required>

      <label id="labelNext">å¾Œæ³Šåœ°:</label>
      <input type="text" name="nextDestination" required>

      <button type="submit" id="submitBtn">é€ä¿¡</button>
    </form>

    <p id="message"></p>
  </div>
<script>
    
    
    // âœ…â‘¡ ç¿»è¨³ãƒ‡ãƒ¼ã‚¿
    const translations = {
      ja: {
        formTitle: "ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æƒ…å ±",
        labelDob: "ç”Ÿå¹´æœˆæ—¥:",
        labelGender: "æ€§åˆ¥:",
        labelNationality: "å›½ç±:",
        labelPrev: "å‰æ³Šåœ°:",
        labelNext: "å¾Œæ³Šåœ°:",
        submit: "é€ä¿¡",
        loading: "èª­ã¿è¾¼ã¿ä¸­...",
        success: "é€ä¿¡ãŒå®Œäº†ã—ã¾ã—ãŸã€‚3ç§’å¾Œã«ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸ç§»å‹•ã—ã¾ã™ã€‚",
        fail: "é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚",
        notfound: "äºˆç´„æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚",
        network: "é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",
        labelName: "åå‰ï¼š",
        labelCode: "äºˆç´„ç•ªå·ï¼š",
        labelCheckin: "ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ—¥ï¼š",
        labelCheckout: "ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆæ—¥ï¼š",
        labelRoom: "éƒ¨å±‹ã‚¿ã‚¤ãƒ—ï¼š",
        emptyNationality: "é¸æŠã—ã¦ãã ã•ã„",
        countryJapan: "æ—¥æœ¬",
        countryUSA: "ã‚¢ãƒ¡ãƒªã‚«",
        countryChina: "ä¸­å›½",
        countryGermany: "ãƒ‰ã‚¤ãƒ„",
        countryFrance: "ãƒ•ãƒ©ãƒ³ã‚¹",
        countryTaiwan: "å°æ¹¾",
        countryKorea: "éŸ“å›½",
        countryItaly: "ã‚¤ã‚¿ãƒªã‚¢",
        countrySwitzerland: "ã‚¹ã‚¤ã‚¹",
        countryRussia: "ãƒ­ã‚·ã‚¢",
        countryThailand: "ã‚¿ã‚¤",
        countryVietnam: "ãƒ™ãƒˆãƒŠãƒ ",
        emptyGender:"é¸æŠã—ã¦ãã ã•ã„",
        genderMale:"ç”·æ€§",
        genderFemale:"å¥³æ€§",
        genderOther:"ãã®ä»–",
      },
      en: {
        formTitle: "Check-in Information",
        labelDob: "Date of Birth:",
        labelGender: "Gender:",
        labelNationality: "Nationality:",
        labelPrev: "Previous Stay:",
        labelNext: "Next Destination:",
        submit: "Submit",
        loading: "Loading...",
        success: "Submitted successfully. Redirecting in 3 seconds.",
        fail: "Submission failed.",
        notfound: "Reservation not found.",
        network: "Network error occurred.",
        labelName: "Name:",
        labelCode: "Booking Number:",
        labelCheckin: "Check-in Date:",
        labelCheckout: "Check-out Date:",
        labelRoom: "Room Type:",
        emptyNationality: "Please select",
        countryJapan: "Japan",
        countryUSA: "USA",
        countryChina: "China",
        countryGermany: "Germany",
        countryFrance: "France",
        countryTaiwan: "Taiwan",
        countryKorea: "South Korea",
        countryItaly: "Italy",
        countrySwitzerland: "Switzerland",
        countryRussia: "Russia",
        countryThailand: "Thailand",
        countryVietnam: "Vietnam",
        emptyGender: "Please select",
        genderMale: "Male",
        genderFemale: "Female",
        genderOther: "Other",
         },
    
      es: {
        formTitle: "InformaciÃ³n de Check-in",
        labelDob: "Fecha de nacimiento:",
        labelGender: "GÃ©nero:",
        labelNationality: "Nacionalidad:",
        labelPrev: "Alojamiento anterior:",
        labelNext: "PrÃ³ximo destino:",
        submit: "Enviar",
        loading: "Cargando...",
        success: "Enviado correctamente. Redirigiendo en 3 segundos.",
        fail: "Error al enviar.",
        notfound: "No se encontrÃ³ la reserva.",
        network: "Error de red.",
        labelName: "Nombre:",
        labelCode: "CÃ³digo de reserva:",
        labelCheckin: "Fecha de entrada:",
        labelCheckout: "Fecha de salida:",
        labelRoom: "Tipo de habitaciÃ³n:",
        emptyNationality: "Seleccione",
        countryJapan: "JapÃ³n",
        countryUSA: "EE. UU.",
        countryChina: "China",
        countryGermany: "Alemania",
        countryFrance: "Francia",
        countryTaiwan: "TaiwÃ¡n",
        countryKorea: "Corea del Sur",
        countryItaly: "Italia",
        countrySwitzerland: "Suiza",
        countryRussia: "Rusia",
        countryThailand: "Tailandia",
        countryVietnam: "Vietnam",
        emptyGender: "Seleccione",
        genderMale: "Hombre",
        genderFemale: "Mujer",
        genderOther: "Otro",   
      },
          
      "zh-CN": {
        formTitle: "å…¥ä½ä¿¡æ¯",
        labelDob: "å‡ºç”Ÿæ—¥æœŸï¼š",
        labelGender: "æ€§åˆ«ï¼š",
        labelNationality: "å›½ç±ï¼š",
        labelPrev: "å‰ä¸€ä½å®¿åœ°ï¼š",
        labelNext: "ä¸‹ä¸€ç›®çš„åœ°ï¼š",
        submit: "æäº¤",
        loading: "åŠ è½½ä¸­...",
        success: "æäº¤æˆåŠŸã€‚3ç§’åè·³è½¬ä¸»é¡µã€‚",
        fail: "æäº¤å¤±è´¥ã€‚",
        notfound: "æœªæ‰¾åˆ°é¢„è®¢ä¿¡æ¯ã€‚",
        network: "ç½‘ç»œé”™è¯¯ã€‚",
        labelName: "å§“åï¼š",
        labelCode: "é¢„è®¢å·ç ï¼š",
        labelCheckin: "å…¥ä½æ—¥æœŸï¼š",
        labelCheckout: "é€€æˆ¿æ—¥æœŸï¼š",
        labelRoom: "æˆ¿å‹ï¼š",
        emptyNationality: "è¯·é€‰æ‹©",
        countryJapan: "æ—¥æœ¬",
        countryUSA: "ç¾å›½",
        countryChina: "ä¸­å›½",
        countryGermany: "å¾·å›½",
        countryFrance: "æ³•å›½",
        countryTaiwan: "å°æ¹¾",
        countryKorea: "éŸ©å›½",
        countryItaly: "æ„å¤§åˆ©",
        countrySwitzerland: "ç‘å£«",
        countryRussia: "ä¿„ç½—æ–¯",
        countryThailand: "æ³°å›½",
        countryVietnam: "è¶Šå—",
        emptyGender: "è¯·é€‰æ‹©",
        genderMale: "ç”·",
        genderFemale: "å¥³",
        genderOther: "å…¶ä»–",
      },
        
      "zh-TW": {
        formTitle: "å…¥ä½è³‡è¨Š",
        labelDob: "å‡ºç”Ÿæ—¥æœŸï¼š",
        labelGender: "æ€§åˆ¥ï¼š",
        labelNationality: "åœ‹ç±ï¼š",
        labelPrev: "å‰ä¸€ä½å®¿åœ°ï¼š",
        labelNext: "ä¸‹ä¸€ç›®çš„åœ°ï¼š",
        submit: "é€å‡º",
        loading: "è¼‰å…¥ä¸­...",
        success: "å·²é€å‡ºã€‚3ç§’å¾Œè¿”å›é¦–é ã€‚",
        fail: "é€å‡ºå¤±æ•—ã€‚",
        notfound: "æ‰¾ä¸åˆ°é è¨‚è³‡è¨Šã€‚",
        network: "ç¶²è·¯éŒ¯èª¤ã€‚",
        labelName: "å§“åï¼š",
        labelCode: "é è¨‚ç·¨è™Ÿï¼š",
        labelCheckin: "å…¥ä½æ—¥æœŸï¼š",
        labelCheckout: "é€€æˆ¿æ—¥æœŸï¼š",
        labelRoom: "æˆ¿å‹ï¼š",
        emptyNationality: "è«‹é¸æ“‡",
        countryJapan: "æ—¥æœ¬",
        countryUSA: "ç¾åœ‹",
        countryChina: "ä¸­åœ‹",
        countryGermany: "å¾·åœ‹",
        countryFrance: "æ³•åœ‹",
        countryTaiwan: "å°ç£",
        countryKorea: "éŸ“åœ‹",
        countryItaly: "ç¾©å¤§åˆ©",
        countrySwitzerland: "ç‘å£«",
        countryRussia: "ä¿„ç¾…æ–¯",
        countryThailand: "æ³°åœ‹",
        countryVietnam: "è¶Šå—",
        emptyGender: "è«‹é¸æ“‡",
        genderMale: "ç”·",
        genderFemale: "å¥³",
        genderOther: "å…¶ä»–",
      },
    "ko": {
        formTitle: "ì²´í¬ì¸ ì •ë³´",
        labelDob: "ìƒë…„ì›”ì¼:",
        labelGender: "ì„±ë³„:",
        labelNationality: "êµ­ì :",
        labelPrev: "ì´ì „ ìˆ™ì†Œ:",
        labelNext: "ë‹¤ìŒ ëª©ì ì§€:",
        submit: "ì œì¶œ",
        loading: "ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...",
        success: "ì œì¶œì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. 3ì´ˆ í›„ì— ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.",
        fail: "ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",
        notfound: "ì˜ˆì•½ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
        network: "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",
        labelName: "ì´ë¦„:",
        labelCode: "ì˜ˆì•½ ë²ˆí˜¸:",
        labelCheckin: "ì²´í¬ì¸ ë‚ ì§œ:",
        labelCheckout: "ì²´í¬ì•„ì›ƒ ë‚ ì§œ:",
        labelRoom: "ê°ì‹¤ ìœ í˜•:",
        emptyNationality: "ì„ íƒí•˜ì„¸ìš”",
        countryJapan: "ì¼ë³¸",
        countryUSA: "ë¯¸êµ­",
        countryChina: "ì¤‘êµ­",
        countryGermany: "ë…ì¼",
        countryFrance: "í”„ë‘ìŠ¤",
        countryTaiwan: "ëŒ€ë§Œ",
        countryKorea: "ëŒ€í•œë¯¼êµ­",
        countryItaly: "ì´íƒˆë¦¬ì•„",
        countrySwitzerland: "ìŠ¤ìœ„ìŠ¤",
        countryRussia: "ëŸ¬ì‹œì•„",
        countryThailand: "íƒœêµ­",
        countryVietnam: "ë² íŠ¸ë‚¨",
        emptyGender: "ì„ íƒí•˜ì„¸ìš”",
        genderMale: "ë‚¨ì„±",
        genderFemale: "ì—¬ì„±",
        genderOther: "ê¸°íƒ€",
       } 
    };

    // âœ…â‘¢ è¨€èªé¸æŠãƒ»ä¿æŒãƒ»åæ˜ 
 
   const params = new URLSearchParams(window.location.search);
    const name = params.get("name");
    const booking = params.get("booking");
    const lang = params.get("lang") || localStorage.getItem("lang") || "ja";

    function applyLanguage(lang) {
      const t = translations[lang] || translations["en"];
      document.getElementById("formTitle").innerText = t.formTitle;
      document.getElementById("labelDob").innerText = t.labelDob;
      document.getElementById("labelGender").innerText = t.labelGender;
      document.getElementById("labelNationality").innerText = t.labelNationality;
      document.getElementById("labelPrev").innerText = t.labelPrev;
      document.getElementById("labelNext").innerText = t.labelNext;
      document.getElementById("submitBtn").innerText = t.submit;
      document.getElementById("guestInfo").innerText = t.loading;
      document.getElementById("languageSelect").value = lang;
      localStorage.setItem("lang", lang);

      document.querySelectorAll("#nationalitySelect option[data-i18n-option]").forEach(opt => {
        const key = opt.getAttribute("data-i18n-option");
        opt.innerText = t[key];
      });
      document.querySelector("#nationalitySelect option[value='']").innerText = t.emptyNationality;

      document.querySelectorAll("#genderSelect option[data-i18n-option]").forEach(opt => {
        const key = opt.getAttribute("data-i18n-option");
        opt.innerText = t[key];
      });
      document.querySelector("#genderSelect option[value='']").innerText = t.emptyGender;

      $('#nationalitySelect').select2({ width: '100%', minimumResultsForSearch: 5, language: lang });
    }

    function setLanguage(lang) {
      applyLanguage(lang);
    }

    applyLanguage(lang);

    const scriptURL = "https://script.google.com/macros/s/AKfycbzTOVbObca7nkgQQKVRgOkx4r54eHd-gyoBny0cZaNRIjVWjDiL8xoJvfb3RMJ9SUtb9Q/exec";

    fetch(`${scriptURL}?name=${encodeURIComponent(name)}&booking=${booking}&mode=info`)
      .then(res => res.json())
      .then(data => {
        const t = translations[lang] || translations["en"];
        if (data.result === "OK") {
          const checkinDate = data.checkin.split("T")[0];
          const checkoutDate = data.checkout.split("T")[0];
          document.getElementById("guestInfo").innerHTML = `
            <p><strong>${t.labelName}</strong> ${name}</p>
            <p><strong>${t.labelCode}</strong> ${booking}</p>
            <p><strong>${t.labelCheckin}</strong> ${checkinDate}</p>
            <p><strong>${t.labelCheckout}</strong> ${checkoutDate}</p>
            <p><strong>${t.labelRoom}</strong> ${data.room}</p>`;
        } else {
          document.getElementById("guestInfo").innerText = t.notfound;
        }
      })
      .catch(() => {
        document.getElementById("guestInfo").innerText = translations[lang].network;
      });

    document.getElementById("checkinForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const formData = new FormData(e.target);
      formData.append("name", name);
      formData.append("booking", booking);

      fetch(scriptURL, {
        method: "POST",
        body: formData,
        redirect: "follow"
      })
        .then(res => res.text())
        .then(res => {
          if (res === "RECEIVED") {
            document.getElementById("message").innerText = translations[lang].success;
            setTimeout(() => {
              window.location.href = "https://wiseowlhostels.com/kyoto/";
            }, 3000);
          } else {
            document.getElementById("message").innerText = translations[lang].fail;
          }
        })
        .catch(() => {
          document.getElementById("message").innerText = translations[lang].network;
        });
    });
  </script>
</body>
</html>

