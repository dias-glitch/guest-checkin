日付入力は年・月・日を横並び

✅ 最新 checkin.html
html
Copy
Edit
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>チェックインフォーム</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      background-color: #f0f2f5;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: sans-serif;
    }

    .checkin-box {
      background-color: white;
      padding: 30px 40px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      width: 420px;
      position: relative;
    }

    .lang-box {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 12px;
    }

    .lang-box select {
      font-size: 12px;
      padding: 4px 6px;
      border-radius: 4px;
      background-color: #f2f2f2;
      border: 1px solid #ccc;
    }

    .checkin-box h2 {
      text-align: center;
      margin-bottom: 20px;
    }

    .checkin-box p {
      margin: 8px 0;
    }

    form label {
      display: block;
      margin-top: 15px;
    }

    input, select {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .dob-row {
      display: flex;
      gap: 5px;
      margin-top: 5px;
    }

    .dob-row select {
      width: 90px;
      padding: 6px;
      font-size: 14px;
    }

    .gender-row {
      display: flex;
      gap: 15px;
      margin-top: 5px;
    }

    .gender-row label {
      display: inline-flex;
      align-items: center;
      font-size: 14px;
      white-space: nowrap;
    }

    .gender-row input {
      margin-right: 5px;
    }

    button {
      width: 100%;
      margin-top: 20px;
      background-color: blue;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      background-color: darkblue;
    }

    #message {
      color: green;
      margin-top: 15px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="checkin-box">
    <!-- ✅ 言語セレクト：右上 -->
    <div class="lang-box">
      🌐 
      <select id="languageSelect" onchange="setLanguage(this.value)">
        <option value="ja">日本語</option>
        <option value="en">English</option>
        <option value="es">Español</option>
        <option value="zh-CN">简体中文</option>
        <option value="zh-TW">繁體中文</option>
      </select>
    </div>

    <h2 id="formTitle">チェックイン情報</h2>
    <div id="guestInfo">読み込み中...</div>

    <form id="checkinForm">
      <label id="labelDob">生年月日:</label>
      <div class="dob-row">
        <select id="dob-year" required></select>
        <select id="dob-month" required></select>
        <select id="dob-day" required></select>
      </div>
      <input type="hidden" name="dob" id="dob-hidden">

      <label id="labelGender">性別:</label>
      <div class="gender-row">
        <label><input type="radio" name="gender" value="M" required> M</label>
        <label><input type="radio" name="gender" value="F"> F</label>
        <label><input type="radio" name="gender" value="Other"> その他</label>
      </div>

      <label id="labelNationality">国籍:
        <select name="nationality" required>
          <option value="">選択してください</option>
          <option value="Japan">Japan</option>
          <option value="USA">USA</option>
          <option value="China">China</option>
          <option value="Germany">Germany</option>
          <option value="France">France</option>
        </select>
      </label>

      <label id="labelPrev" for="previousStay">前泊地:</label>
      <input type="text" id="previousStay" name="previousStay" required>

      <label id="labelNext" for="nextDestination">後泊地:</label>
      <input type="text" id="nextDestination" name="nextDestination" required>

      <button type="submit" id="submitBtn">送信</button>
    </form>
    <p id="message"></p>
  </div>

  <script>
    const translations = {
      ja: {
        formTitle: "チェックイン情報",
        labelDob: "生年月日:",
        labelGender: "性別:",
        labelNationality: "国籍:",
        labelPrev: "前泊地:",
        labelNext: "後泊地:",
        submit: "送信",
        loading: "読み込み中...",
        success: "送信が完了しました。3秒後にトップページへ移動します。",
        fail: "送信に失敗しました。",
        notfound: "予約情報が見つかりませんでした。",
        network: "通信エラーが発生しました。"
      },
      en: {
        formTitle: "Check-in Information",
        labelDob: "Date of Birth:",
        labelGender: "Gender:",
        labelNationality: "Nationality:",
        labelPrev: "Previous Stay:",
        labelNext: "Next Destination:",
        submit: "Submit",
        loading: "Loading...",
        success: "Submitted successfully. Redirecting in 3 seconds.",
        fail: "Submission failed.",
        notfound: "Reservation not found.",
        network: "Network error occurred."
      },
      es: {
        formTitle: "Información de Check-in",
        labelDob: "Fecha de nacimiento:",
        labelGender: "Género:",
        labelNationality: "Nacionalidad:",
        labelPrev: "Alojamiento anterior:",
        labelNext: "Próximo destino:",
        submit: "Enviar",
        loading: "Cargando...",
        success: "Enviado correctamente. Redirigiendo en 3 segundos.",
        fail: "Error al enviar.",
        notfound: "No se encontró la reserva.",
        network: "Error de red."
      },
      "zh-CN": {
        formTitle: "入住信息",
        labelDob: "出生日期：",
        labelGender: "性别：",
        labelNationality: "国籍：",
        labelPrev: "前一住宿地：",
        labelNext: "下一目的地：",
        submit: "提交",
        loading: "加载中...",
        success: "提交成功。3秒后跳转主页。",
        fail: "提交失败。",
        notfound: "未找到预订信息。",
        network: "网络错误。"
      },
      "zh-TW": {
        formTitle: "入住資訊",
        labelDob: "出生日期：",
        labelGender: "性別：",
        labelNationality: "國籍：",
        labelPrev: "前一住宿地：",
        labelNext: "下一目的地：",
        submit: "送出",
        loading: "載入中...",
        success: "已送出。3秒後返回首頁。",
        fail: "送出失敗。",
        notfound: "找不到預訂資訊。",
        network: "網路錯誤。"
      }
    };

    const params = new URLSearchParams(window.location.search);
    const name = params.get("name");
    const booking = params.get("booking");
    const lang = params.get("lang") || localStorage.getItem("lang") || "ja";

    function applyLanguage(lang) {
      const t = translations[lang];
      document.getElementById("formTitle").innerText = t.formTitle;
      document.getElementById("labelDob").innerText = t.labelDob;
      document.getElementById("labelGender").innerText = t.labelGender;
      document.getElementById("labelNationality").innerText = t.labelNationality;
      document.getElementById("labelPrev").innerText = t.labelPrev;
      document.getElementById("labelNext").innerText = t.labelNext;
      document.getElementById("submitBtn").innerText = t.submit;
      document.getElementById("guestInfo").innerText = t.loading;
      document.getElementById("languageSelect").value = lang;
      localStorage.setItem("lang", lang);
    }

    function setLanguage(lang) {
      applyLanguage(lang);
    }

    applyLanguage(lang);

    const yearSelect = document.getElementById("dob-year");
    const monthSelect = document.getElementById("dob-month");
    const daySelect = document.getElementById("dob-day");
    const hiddenDob = document.getElementById("dob-hidden");

    for (let y = 2025; y >= 1900; y--) {
      yearSelect.innerHTML += `<option value="${y}">${y}</option>`;
    }

    for (let m = 1; m <= 12; m++) {
      const mm = m.toString().padStart(2, "0");
      monthSelect.innerHTML += `<option value="${mm}">${m}</option>`;
    }

    function updateDays() {
      const year = parseInt(yearSelect.value);
      const month = parseInt(monthSelect.value);
      const days = new Date(year, month, 0).getDate();
      daySelect.innerHTML = "";
      for (let d = 1; d <= days; d++) {
        const dd = d.toString().padStart(2, "0");
        daySelect.innerHTML += `<option value="${dd}">${d}</option>`;
      }
    }

    yearSelect.addEventListener("change", updateDays);
    monthSelect.addEventListener("change", updateDays);
    updateDays();

    const scriptURL = "https://script.google.com/macros/s/AKfycbzt0XjDc0-vbyRlojF2b1JdMOxNuNKijLy0z84vX40HCb8XOg3oW6hZ5PSLERzhSMsGMA/exec";

    fetch(`${scriptURL}?name=${encodeURIComponent(name)}&booking=${booking}&mode=info`)
      .then(res => res.json())
      .then(data => {
        if (data.result === "OK") {
          const checkinDate = data.checkin.split("T")[0];
          const checkoutDate = data.checkout.split("T")[0];
          document.getElementById("guestInfo").innerHTML =
            `<p><strong>名前：</strong>${name}</p>
             <p><strong>予約番号：</strong>${booking}</p>
             <p><strong>チェックイン日：</strong>${checkinDate}</p>
             <p><strong>チェックアウト日：</strong>${checkoutDate}</p>
             <p><strong>部屋タイプ：</strong>${data.room}</p>`;
        } else {
          document.getElementById("guestInfo").innerText = translations[lang].notfound;
        }
      })
      .catch(() => {
        document.getElementById("guestInfo").innerText = translations[lang].network;
      });

    document.getElementById("checkinForm").addEventListener("submit", function(e) {
      e.preventDefault();

      hiddenDob.value = `${yearSelect.value}-${monthSelect.value}-${daySelect.value}`;

      const formData = new FormData(e.target);
      formData.append("name", name);
      formData.append("booking", booking);

      fetch(scriptURL, {
        method: "POST",
        body: formData
      })
      .then(res => res.text())
      .then(res => {
        if (res === "RECEIVED") {
          document.getElementById("message").innerText = translations[lang].success;
          setTimeout(() => {
            window.location.href = "https://wiseowlhostels.com/kyoto/";
          }, 3000);
        } else {
          document.getElementById("message").innerText = translations[lang].fail;
        }
      })
      .catch(() => {
        document.getElementById("message").innerText = translations[lang].network;
      });
    });
  </script>
</body>
</html>
